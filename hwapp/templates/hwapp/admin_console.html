{% extends "hwapp/layout.html" %}

{% block body %}
{% if user.is_superuser %}
<script>
    function admin(function1) {
        fetch(`/admin_view`, {
            method: 'POST',
            headers: {
                    'X-CSRFToken': document.getElementsByName('csrfmiddlewaretoken')[0].value,
                },
            credentials: 'same-origin',
            body: JSON.stringify({
                'function': `${function1}`
            })
        })
        .then(response=>response.json())
        .then(result => {
            if(result['status'] == 200) {
                const alert = document.getElementById('alert')
                alert.innerHTML = `${function1} completed successfully`
                alert.style.display='block'
            }
        })
    }
</script>
{% csrf_token %}
<div id="alert" class='alert alert-success' style="display: none;"></div>
<div class='flex-container' style='display:flex;height=200px;align-items: space-around;justify-content: center;flex-direction: row;gap:5%;'>
    <div>
        <button class='btn btn-primary' onclick="admin(function1='refresh')">Refresh ICS/Email</button>
    </div>
    <div>
        <button class='btn btn-primary' onclick="admin(function1='overdue')">Refresh Overdue</button>
    </div>
    <div>
        <button class='btn btn-primary' onclick="admin(function1='ics_refresh')">Refresh ICS</button>
    </div>
    <div>
        <button class='btn btn-primary' onclick="admin(function1='send_text')">Send Text</button>
    </div>
    <div>
        <a class='btn btn-primary' target="_blank" href='https://matthew-homeworkapp.atlassian.net/jira/software/projects/HOM/boards/1'>Jira Board</a>
    </div>
    <div>
        <a class='btn btn-primary' target="_blank" href='https://matthew-homeworkapp.atlassian.net/jira/servicedesk/projects/IP/queues/custom/15'>
            ITSM Console
        </a>
    </div>
    <div>
        <button class='btn btn-primary' onclick='window.location.href="/500error"'>Test 500</button>
    </div>
</div>


{% else %}
<div class="alert alert-danger" role="alert">Error: Access Denied</div>
{% endif %}
{% endblock %}